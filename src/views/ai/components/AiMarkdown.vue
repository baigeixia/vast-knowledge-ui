<template>
    <div class="html-highlight markdown-body" v-html="htmltext"></div>
</template>

<script setup>
import { ref, onMounted } from "vue"
import { marked } from 'marked';
import { safeHtml } from '@/utils/domPurifyConfig'
import 'github-markdown-css';

const htmltext = ref(null)

onMounted(() => {
//     const markdownContent = `
// ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ Java ç¨‹åºï¼Œç”¨äºè¾“å‡º "Hello, World!"ï¼š

// \`\`\`java
// public class HelloWorld {
//     public static void main(String[] args) {
//         System.out.println("Hello, World!"); System.out.println("Hello, World!"); System.out.println("Hello, World!"); System.out.println("Hello, World!"); System.out.println("Hello, World!"); System.out.println("Hello, World!"); System.out.println("Hello, World!"); System.out.println("Hello, World!"); System.out.println("Hello, World!"); System.out.println("Hello, World!");
//     }
// }
// \`\`\`

// ### ä»£ç è¯´æ˜ï¼š
// 1. **\`public class HelloWorld\`**ï¼šå®šä¹‰äº†ä¸€ä¸ªå…¬å…±ç±»ï¼Œç±»åæ˜¯ \`HelloWorld\`ã€‚åœ¨ Java ä¸­ï¼Œç±»æ˜¯ä¸€ä¸ªåŸºæœ¬çš„ä»£ç ç»„ç»‡å•å…ƒï¼Œæ–‡ä»¶åéœ€è¦ä¸å…¬å…±ç±»çš„ç±»åä¿æŒä¸€è‡´ï¼ˆè¿™é‡Œæ–‡ä»¶ååº”è¯¥æ˜¯ \`HelloWorld.java\`ï¼‰ã€‚
// 2. **\`public static void main(String[] args)\`**ï¼šè¿™æ˜¯ Java ç¨‹åºçš„å…¥å£ç‚¹ã€‚æ¯ä¸ªå¯æ‰§è¡Œçš„ Java ç¨‹åºéƒ½å¿…é¡»æœ‰ä¸€ä¸ª \`main\` æ–¹æ³•ï¼ŒJVMï¼ˆJavaè™šæ‹Ÿæœºï¼‰åœ¨è¿è¡Œç¨‹åºæ—¶ä¼šä»è¿™ä¸ªæ–¹æ³•å¼€å§‹æ‰§è¡Œä»£ç ã€‚
// 3. **\`System.out.println("Hello, World!");System.out.println("Hello, World!");System.out.println("Hello, World!");\`**ï¼šè¿™æ˜¯ä¸€æ¡è¾“å‡ºè¯­å¥ã€‚

// è¦è¿è¡Œè¿™ä¸ªç¨‹åºï¼Œä½ å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š
// 1. å°†ä¸Šè¿°ä»£ç ä¿å­˜ä¸º \`HelloWorld.java\` æ–‡ä»¶ã€‚
// 2. æ‰“å¼€å‘½ä»¤è¡Œç»ˆç«¯ï¼Œè¿›å…¥ä¿å­˜è¯¥æ–‡ä»¶çš„ç›®å½•ã€‚
// 3. ä½¿ç”¨ \`javac HelloWorld.java\` å‘½ä»¤ç¼–è¯‘ä»£ç ã€‚
// 4. ä½¿ç”¨ \`java HelloWorld\` å‘½ä»¤è¿è¡Œç¨‹åºã€‚
// `;

    const markdownContent = `# ğŸ”¥ Typewriter å®ä¾‹æ–¹æ³•-äº‹ä»¶ \n ğŸ˜„ ä½¿ä½ çš„æ‰“å­—å™¨å¯é«˜åº¦å®šåˆ¶åŒ–ã€‚\n - æ›´æ–¹ä¾¿çš„æ§åˆ¶æ‰“å­—å™¨çš„çŠ¶æ€ \n - åˆ—è¡¨é¡¹ **ç²—ä½“æ–‡æœ¬** å’Œ *æ–œä½“æ–‡æœ¬* \n \`\`\`javascript \n // ğŸ™‰ æ§åˆ¶å°å¯ä»¥æŸ¥çœ‹ç›¸å…³æ‰“æ—¥å¿—\n console.log('Hello, world!');console.log('Hello, world!');console.log('Hello, world!'); console.log('Hello, world!'); console.log('Hello, world!'); console.log('Hello, world!'); console.log('Hello, world!'); console.log('Hello, world!'); console.log('Hello, world!'); console.log('Hello, world!'); console.log('Hello, world!'); console.log('Hello, world!'); console.log('Hello, world!'); \n \`\`\``
    const html = marked.parse(markdownContent);
    // DOMPurify.sanitize(html)
    htmltext.value = safeHtml(html)

    loadHighlightJS()

})

const loadHighlightJS = async () => {
    const module = await import('highlight.js');
    const hljs = module.default; // hljs çš„å®é™…å¼•ç”¨
    // import('highlight.js/styles/a11y-light.css');
    await  import('highlight.js/styles/a11y-light.css');
    // import('highlight.js/styles/github.css'); // å»¶è¿ŸåŠ è½½æ ·å¼

    hljs.highlightAll(); // æ‰§è¡Œé«˜äº®
};

</script>

<style lang="scss" scoped>
@import "@/assets/styles/highlight.scss";

</style>
